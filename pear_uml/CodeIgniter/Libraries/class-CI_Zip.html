<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en"><!--Generated by PHP_UML on Mon, 27 Aug 2012 09:34:36 +0200--><head><title>CodeIgniter\Libraries\CI_Zip</title><link rel="stylesheet" type="text/css" media="all" href="../../style.css"></head><body><div id="navigation"><div id="banner"><ul class="sections"><li><a href="../../overview-summary.html" title="Summary of all packages">Overview</a></li><li><a href="package-summary.html" title="Summary of CodeIgniter\Libraries">Package</a></li><li class="active">Class</li><li><a href="../../index-all.html">Index</a></li></ul><ul class="navigFrame"><a href="../../index.html?CodeIgniter/Libraries/class-CI_Zip.html" class="navigFrameElem" target="_top">FRAMES</a> <a href="class-CI_Zip.html" class="navigFrameElem" target="_top">NO FRAMES</a></ul></div><ul class="siblingSections"><li><a href="class-CI_FTP.html">Prev Class</a></li><li class="last"><a href="class-CI_Profiler.html">Next Class</a></li></ul></div><div id="content"><div class="classSummary"><h3 id="entityPackage">CodeIgniter\Libraries</h3><h1 id="entityName">Class&nbsp;CI_Zip</h1><hr>public&nbsp;class&nbsp;<strong>CI_Zip</strong><br><p>Zip Compression Class <br>This class is based on a library I found at Zend:<br>http://www.zend.com/codex.php?id=696&amp;single=1 <br>The original library is a little rough around the edges so I refactored it and added several additional methods -- Rick Ellis<div></div></p><hr></div><div id="fieldSummary"><h2>Field Summary</h2><table border="1" class="tableSummary"><tr><td align="right" width="1%" valign="top"><span class="code">&nbsp;<a href="../../datatype-string.html" class="linkType">string</a> </span></td><td valign="top"><span class="code"><a href="#%24zipdata" class="linkSummary">$zipdata</a></span></td></tr><tr><td align="right" width="1%" valign="top"><span class="code">&nbsp;<a href="../../datatype-string.html" class="linkType">string</a> </span></td><td valign="top"><span class="code"><a href="#%24directory" class="linkSummary">$directory</a></span></td></tr><tr><td align="right" width="1%" valign="top"><span class="code">&nbsp;<a href="../../datatype-int.html" class="linkType">int</a> </span></td><td valign="top"><span class="code"><a href="#%24entries" class="linkSummary">$entries</a></span></td></tr><tr><td align="right" width="1%" valign="top"><span class="code">&nbsp;<a href="../../datatype-int.html" class="linkType">int</a> </span></td><td valign="top"><span class="code"><a href="#%24file_num" class="linkSummary">$file_num</a></span></td></tr><tr><td align="right" width="1%" valign="top"><span class="code">&nbsp;<a href="../../datatype-int.html" class="linkType">int</a> </span></td><td valign="top"><span class="code"><a href="#%24offset" class="linkSummary">$offset</a></span></td></tr><tr><td align="right" width="1%" valign="top"><span class="code">&nbsp;<a href="../../datatype-mixed.html" class="linkType">mixed</a> </span></td><td valign="top"><span class="code"><a href="#%24now" class="linkSummary">$now</a></span></td></tr></table></div><div id="methodSummary"><h2>Method Summary</h2><table border="1" class="tableSummary"><tr><td align="right" width="1%" valign="top"><span class="code">&nbsp;<a href="../../datatype-void.html" class="linkType">void</a> </span></td><td valign="top"><span class="code"><a href="#__construct()" class="linkSummary">__construct</a>()</span></td></tr><tr><td align="right" width="1%" valign="top"><span class="code">&nbsp;<a href="../../datatype-void.html" class="linkType">void</a> </span></td><td valign="top"><span class="code"><a href="#add_dir(mixed%20%24directory)" class="linkSummary">add_dir</a>(<a href="../../datatype-mixed.html" class="linkType">mixed</a> $directory)</span></td></tr><tr><td align="right" width="1%" valign="top"><span class="code">&nbsp;<a href="../../datatype-array.html" class="linkType">array</a> </span></td><td valign="top"><span class="code"><a href="#_get_mod_time(mixed%20%24dir)" class="linkSummary">_get_mod_time</a>(<a href="../../datatype-mixed.html" class="linkType">mixed</a> $dir)</span></td></tr><tr><td align="right" width="1%" valign="top"><span class="code">&nbsp;<a href="../../datatype-void.html" class="linkType">void</a> </span></td><td valign="top"><span class="code"><a href="#_add_dir(mixed%20%24dir,%C2%A0mixed%20%24file_mtime,%C2%A0mixed%20%24file_mdate)" class="linkSummary">_add_dir</a>(<a href="../../datatype-mixed.html" class="linkType">mixed</a> $dir,&nbsp;<a href="../../datatype-mixed.html" class="linkType">mixed</a> $file_mtime,&nbsp;<a href="../../datatype-mixed.html" class="linkType">mixed</a> $file_mdate)</span></td></tr><tr><td align="right" width="1%" valign="top"><span class="code">&nbsp;<a href="../../datatype-void.html" class="linkType">void</a> </span></td><td valign="top"><span class="code"><a href="#add_data(mixed%20%24filepath,%C2%A0mixed%20%24data=NULL)" class="linkSummary">add_data</a>(<a href="../../datatype-mixed.html" class="linkType">mixed</a> $filepath,&nbsp;<a href="../../datatype-mixed.html" class="linkType">mixed</a> $data=NULL)</span></td></tr><tr><td align="right" width="1%" valign="top"><span class="code">&nbsp;<a href="../../datatype-void.html" class="linkType">void</a> </span></td><td valign="top"><span class="code"><a href="#_add_data(mixed%20%24filepath,%C2%A0mixed%20%24data,%C2%A0mixed%20%24file_mtime,%C2%A0mixed%20%24file_mdate)" class="linkSummary">_add_data</a>(<a href="../../datatype-mixed.html" class="linkType">mixed</a> $filepath,&nbsp;<a href="../../datatype-mixed.html" class="linkType">mixed</a> $data,&nbsp;<a href="../../datatype-mixed.html" class="linkType">mixed</a> $file_mtime,&nbsp;<a href="../../datatype-mixed.html" class="linkType">mixed</a> $file_mdate)</span></td></tr><tr><td align="right" width="1%" valign="top"><span class="code">&nbsp;<a href="../../datatype-bool.html" class="linkType">bool</a> </span></td><td valign="top"><span class="code"><a href="#read_file(mixed%20%24path,%C2%A0mixed%20%24preserve_filepath=FALSE)" class="linkSummary">read_file</a>(<a href="../../datatype-mixed.html" class="linkType">mixed</a> $path,&nbsp;<a href="../../datatype-mixed.html" class="linkType">mixed</a> $preserve_filepath=FALSE)</span></td></tr><tr><td align="right" width="1%" valign="top"><span class="code">&nbsp;<a href="../../datatype-bool.html" class="linkType">bool</a> </span></td><td valign="top"><span class="code"><a href="#read_dir(mixed%20%24path,%C2%A0mixed%20%24preserve_filepath=TRUE,%C2%A0mixed%20%24root_path=NULL)" class="linkSummary">read_dir</a>(<a href="../../datatype-mixed.html" class="linkType">mixed</a> $path,&nbsp;<a href="../../datatype-mixed.html" class="linkType">mixed</a> $preserve_filepath=TRUE,&nbsp;<a href="../../datatype-mixed.html" class="linkType">mixed</a> $root_path=NULL)</span></td></tr><tr><td align="right" width="1%" valign="top"><span class="code">&nbsp;</span></td><td valign="top"><span class="code"><a href="#get_zip()" class="linkSummary">get_zip</a>()</span></td></tr><tr><td align="right" width="1%" valign="top"><span class="code">&nbsp;<a href="../../datatype-bool.html" class="linkType">bool</a> </span></td><td valign="top"><span class="code"><a href="#archive(mixed%20%24filepath)" class="linkSummary">archive</a>(<a href="../../datatype-mixed.html" class="linkType">mixed</a> $filepath)</span></td></tr><tr><td align="right" width="1%" valign="top"><span class="code">&nbsp;<a href="../../datatype-bool.html" class="linkType">bool</a> </span></td><td valign="top"><span class="code"><a href="#download(string%20%24filename='backup.zip')" class="linkSummary">download</a>(<a href="../../datatype-string.html" class="linkType">string</a> $filename='backup.zip')</span></td></tr><tr><td align="right" width="1%" valign="top"><span class="code">&nbsp;<a href="../../datatype-void.html" class="linkType">void</a> </span></td><td valign="top"><span class="code"><a href="#clear_data()" class="linkSummary">clear_data</a>()</span></td></tr></table></div><div id="fieldDetail"><h2>Field Detail</h2><div class="detail" id="$zipdata"><h4>$zipdata</h4><div class="detailContent"><span class="code">public&nbsp;<a href="../../datatype-string.html" class="linkType">string</a> <b> $zipdata</b> = ''</span><p></p></div></div><hr><div class="detail" id="$directory"><h4>$directory</h4><div class="detailContent"><span class="code">public&nbsp;<a href="../../datatype-string.html" class="linkType">string</a> <b> $directory</b> = ''</span><p></p></div></div><hr><div class="detail" id="$entries"><h4>$entries</h4><div class="detailContent"><span class="code">public&nbsp;<a href="../../datatype-int.html" class="linkType">int</a> <b> $entries</b> = 0</span><p></p></div></div><hr><div class="detail" id="$file_num"><h4>$file_num</h4><div class="detailContent"><span class="code">public&nbsp;<a href="../../datatype-int.html" class="linkType">int</a> <b> $file_num</b> = 0</span><p></p></div></div><hr><div class="detail" id="$offset"><h4>$offset</h4><div class="detailContent"><span class="code">public&nbsp;<a href="../../datatype-int.html" class="linkType">int</a> <b> $offset</b> = 0</span><p></p></div></div><hr><div class="detail" id="$now"><h4>$now</h4><div class="detailContent"><span class="code">public&nbsp;<a href="../../datatype-mixed.html" class="linkType">mixed</a> <b> $now</b></span><p></p></div></div><hr></div><div id="methodDetail"><h2>Method Detail</h2><div class="detail" id="__construct()"><h4>__construct</h4><div class="detailContent"><span class="code">public&nbsp;<a href="../../datatype-void.html" class="linkType">void</a> <b> __construct</b>()</span><p><p>Constructor</p></p></div></div><div class="detail" id="add_dir(mixed $directory)"><h4>add_dir</h4><div class="detailContent"><span class="code">public&nbsp;<a href="../../datatype-void.html" class="linkType">void</a> <b> add_dir</b>(<a href="../../datatype-mixed.html" class="linkType">mixed</a> $directory)</span><p><p>Add Directory <br>Lets you add a virtual directory into which you can place files.</p></p><h3 class="titleSmallList">Parameters</h3><div class="smallList"><span class="code">$directory</span> - <br></div></div></div><div class="detail" id="_get_mod_time(mixed $dir)"><h4>_get_mod_time</h4><div class="detailContent"><span class="code">public&nbsp;<a href="../../datatype-array.html" class="linkType">array</a> <b> _get_mod_time</b>(<a href="../../datatype-mixed.html" class="linkType">mixed</a> $dir)</span><p><p>Get file/directory modification time <br>If this is a newly created file/dir, we will set the time to 'now'</p></p><h3 class="titleSmallList">Parameters</h3><div class="smallList"><span class="code">$dir</span> - <br></div></div></div><div class="detail" id="_add_dir(mixed $dir,&nbsp;mixed $file_mtime,&nbsp;mixed $file_mdate)"><h4>_add_dir</h4><div class="detailContent"><span class="code">public&nbsp;<a href="../../datatype-void.html" class="linkType">void</a> <b> _add_dir</b>(<a href="../../datatype-mixed.html" class="linkType">mixed</a> $dir,&nbsp;<a href="../../datatype-mixed.html" class="linkType">mixed</a> $file_mtime,&nbsp;<a href="../../datatype-mixed.html" class="linkType">mixed</a> $file_mdate)</span><p><p>Add Directory</p></p><h3 class="titleSmallList">Parameters</h3><div class="smallList"><span class="code">$dir</span> - <br><span class="code">$file_mtime</span> - <br><span class="code">$file_mdate</span> - <br></div></div></div><div class="detail" id="add_data(mixed $filepath,&nbsp;mixed $data=NULL)"><h4>add_data</h4><div class="detailContent"><span class="code">public&nbsp;<a href="../../datatype-void.html" class="linkType">void</a> <b> add_data</b>(<a href="../../datatype-mixed.html" class="linkType">mixed</a> $filepath,&nbsp;<a href="../../datatype-mixed.html" class="linkType">mixed</a> $data=NULL)</span><p><p>Add Data to Zip <br>Lets you add files to the archive. If the path is included in the filename it will be placed within a directory.  Make sure you use add_dir() first to create the folder.</p></p><h3 class="titleSmallList">Parameters</h3><div class="smallList"><span class="code">$filepath</span> - <br><span class="code">$data</span> - <br></div></div></div><div class="detail" id="_add_data(mixed $filepath,&nbsp;mixed $data,&nbsp;mixed $file_mtime,&nbsp;mixed $file_mdate)"><h4>_add_data</h4><div class="detailContent"><span class="code">public&nbsp;<a href="../../datatype-void.html" class="linkType">void</a> <b> _add_data</b>(<a href="../../datatype-mixed.html" class="linkType">mixed</a> $filepath,&nbsp;<a href="../../datatype-mixed.html" class="linkType">mixed</a> $data,&nbsp;<a href="../../datatype-mixed.html" class="linkType">mixed</a> $file_mtime,&nbsp;<a href="../../datatype-mixed.html" class="linkType">mixed</a> $file_mdate)</span><p><p>Add Data to Zip</p></p><h3 class="titleSmallList">Parameters</h3><div class="smallList"><span class="code">$filepath</span> - <br><span class="code">$data</span> - <br><span class="code">$file_mtime</span> - <br><span class="code">$file_mdate</span> - <br></div></div></div><div class="detail" id="read_file(mixed $path,&nbsp;mixed $preserve_filepath=FALSE)"><h4>read_file</h4><div class="detailContent"><span class="code">public&nbsp;<a href="../../datatype-bool.html" class="linkType">bool</a> <b> read_file</b>(<a href="../../datatype-mixed.html" class="linkType">mixed</a> $path,&nbsp;<a href="../../datatype-mixed.html" class="linkType">mixed</a> $preserve_filepath=FALSE)</span><p><p>Read the contents of a file and add it to the zip</p></p><h3 class="titleSmallList">Parameters</h3><div class="smallList"><span class="code">$path</span> - <br><span class="code">$preserve_filepath</span> - <br></div></div></div><div class="detail" id="read_dir(mixed $path,&nbsp;mixed $preserve_filepath=TRUE,&nbsp;mixed $root_path=NULL)"><h4>read_dir</h4><div class="detailContent"><span class="code">public&nbsp;<a href="../../datatype-bool.html" class="linkType">bool</a> <b> read_dir</b>(<a href="../../datatype-mixed.html" class="linkType">mixed</a> $path,&nbsp;<a href="../../datatype-mixed.html" class="linkType">mixed</a> $preserve_filepath=TRUE,&nbsp;<a href="../../datatype-mixed.html" class="linkType">mixed</a> $root_path=NULL)</span><p><p>Read a directory and add it to the zip.<br><br>This function recursively reads a folder and everything it contains (including sub-folders) and creates a zip based on it.  Whatever directory structure is in the original file path will be recreated in the zip file.</p></p><h3 class="titleSmallList">Parameters</h3><div class="smallList"><span class="code">$path</span> - <br><span class="code">$preserve_filepath</span> - <br><span class="code">$root_path</span> - <br></div></div></div><div class="detail" id="get_zip()"><h4>get_zip</h4><div class="detailContent"><span class="code">public&nbsp;<b> get_zip</b>()</span><p><p>Get the Zip file</p></p></div></div><div class="detail" id="archive(mixed $filepath)"><h4>archive</h4><div class="detailContent"><span class="code">public&nbsp;<a href="../../datatype-bool.html" class="linkType">bool</a> <b> archive</b>(<a href="../../datatype-mixed.html" class="linkType">mixed</a> $filepath)</span><p><p>Write File to the specified directory <br>Lets you write a file</p></p><h3 class="titleSmallList">Parameters</h3><div class="smallList"><span class="code">$filepath</span> - <br></div></div></div><div class="detail" id="download(string $filename='backup.zip')"><h4>download</h4><div class="detailContent"><span class="code">public&nbsp;<a href="../../datatype-bool.html" class="linkType">bool</a> <b> download</b>(<a href="../../datatype-string.html" class="linkType">string</a> $filename='backup.zip')</span><p><p>Download</p></p><h3 class="titleSmallList">Parameters</h3><div class="smallList"><span class="code">$filename</span> - <br></div></div></div><div class="detail" id="clear_data()"><h4>clear_data</h4><div class="detailContent"><span class="code">public&nbsp;<a href="../../datatype-void.html" class="linkType">void</a> <b> clear_data</b>()</span><p><p>Initialize Data <br>Lets you clear current zip data.  Useful if you need to create multiple zips with different data.</p></p></div></div></div></div></body></html>
